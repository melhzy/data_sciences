---
title: "Introduction to R"
author: "Ziyuan Huang"
date: "Last Updated: `r Sys.Date()`"
output: 
  slidy_presentation:
    incremental: true 
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction to R 

- We will first get started by install R and RStudio.
- We will explore how R works and the **key windows in RStudio including the console, editor and graphical windows**.
- We will also look at how to **create variables, data-sets, and import and manipulate data in the R environment.**

## What is R? 

- R is a **free software environment for statistical computing and graphics.** 
- It is what's known as **'open source'**, the people who developed R allow everyone to access their code.
- In essence, R exists as a base package with a reasonable amount of functionality. 

## Why use R? 

- The main advantages of using R are that it is **free, and it is a versatile and dynamic environment.**
- R's written commands are a **much more efficient way to work.**

## Install R Programming Language 

- To download the software you can use the following links & instructions:
- **R Project for Statistical Computing**: https://www.r-project.org/
- **Current R Version**: 4.5.2 (or latest available)

## Installation of RStudio or Posit 

- After installing R, install an **IDE** *(Integrated Development Environment)* to make your programming faster and more convenient. 
- **Posit (formerly RStudio)**: https://posit.co/downloads/
  - Install the **free Posit Desktop** version (formerly RStudio Desktop)
- **Alternative**: Visual Studio Code with R extension
  - Download VS Code: https://code.visualstudio.com/
  - Install R extension by REditorSupport
- Mac users: Install XQuartz https://www.xquartz.org/ (for graphics support)

## Overall Note

- You can learn R.
- You will get frustrated.
- You will get errors that don't help or make sense.
  - **AI assistants are powerful learning tools** (ChatGPT, Claude, Google Gemini, GitHub Copilot, etc.)
  - Paste error messages into AI tools for explanations and solutions
  - Ask AI to explain unfamiliar functions or code patterns
  - **Use AI responsibly**: Understand the code it provides, don't just copy-paste
  - Traditional resources still valuable: Stack Overflow, R documentation, Posit Community
  - **Best practice**: Learn *why* solutions work, not just *that* they work
    
## Helpful Websites

- Quick-R: https://www.statmethods.net
- R documentation: https://www.rdocumentation.org
- Posit Cheatsheets: https://posit.co/resources/cheatsheets/
- R for Data Science (2nd edition): https://r4ds.hadley.nz/
- Stack Overflow: https://stackoverflow.com/questions/tagged/r
- Posit Community: https://forum.posit.co/
- Learn Statistics with R: https://learningstatisticswithr.com/

## Outline

- Commands
- Object Types 
- Subsetting and Indexing
- Missing Data
- Working Directories
- Packages 
- Functions

## Commands

- Commands are the code that you tell R to do for you.
- They can be very simple or complex.
- Computers do what *you* tell them to do. Mistakes happen! 
  - Maybe it's a typo, maybe it's a misunderstanding of what the code does 

## Commands

- You can type a command directly into the *console*
- You can type in a document (*Script* or *Markdown*) and tell it to then run in the *console*

```{r}
X <- 4
```

## Commands

- `>` indicates the console is ready for more code
- `+` indicates that you haven't finished a code block
- Capitalization and symbols matter (R is case-sensitive!)
- `=` and `<-` are equivalent for assignment (though `<-` is preferred by convention)
- **Keyboard shortcuts**:
  - Up arrow: scroll through command history
  - Tab key: auto-complete variable names and functions
  - Ctrl/Cmd + Enter: run current line/selection
- Use `?function_name` to get help documentation 

## Commands

- Let's take a look and run some simple commands
  - Where is the console
  - How do I move them around?
  - How do I run code?
  - What is a Script?
  - What is Markdown? 
  - How do I run code in those? 

## RStudio/Posit

- What are all the windows in RStudio/Posit? 
- **Source/Editor Pane**:
  - Current files that are open like R scripts (.R), R Markdown (.Rmd), Quarto (.qmd), etc.
- **Console, Terminal, Background Jobs**:
    - Console: Where R code executes
    - Terminal: Access to system command line
    - Background Jobs: Long-running tasks
- **Environment, History, Connections, Git**:
  - Environment: Shows variables and objects in your workspace
  - History: Previously run commands
  - Connections: Database connections
  - Git: Version control integration
- **Files, Plots, Packages, Help, Viewer**: 
  - Files: File browser
  - Plots: Visualizations output
  - Packages: Manage installed packages
  - Help: Documentation viewer
  - Viewer: For HTML content and web applications

## Object Types
  
- Here are some of the basics:
  - **Vectors**: 1-dimensional arrays of the same type
  - **Lists**: Can contain mixed types and structures
  - **Matrices**: 2-dimensional arrays of the same type
  - **Data Frames**: 2D with columns of different types (traditional R)
  - **Tibbles**: Modern data frames from tidyverse (enhanced features)
- Within those objects, values can be:
  - **Character**: Text strings
  - **Factor**: Categorical data with levels
  - **Numeric/Integer/Double**: Numbers
  - **Logical**: TRUE or FALSE
  - **Special values**: NA (missing), NULL (empty), NaN (not a number), Inf (infinity)
- Objects can have attributes (names, dimensions, class, etc.)

## Objects Example

```{r}
library(palmerpenguins)
data(penguins)
attributes(penguins)
```

## Objects Example

```{r}
str(penguins)

names(penguins) #ls(penguins) provides this as well 
```

## Vectors

- You can think about a vector as one row or column of data
- All the objects must be the same class
- If you try to mix and match, it will coerce them into the same type or make them `NA` if not.

```{r}
X
```

- `[1]` indicates the number of the first item for each printed row 

```{r}
penguins$species
```

## Vector Examples

```{r}
A <- 1:20
A

B <- seq(from = 1, to = 20, by = 1)
B

C <- c("cheese", "is", "great")
C

D <- rep(1, times = 30)
D
```

## Value Types

```{r}
class(A)
class(C)
class(penguins)
class(penguins$species)
```

## Functions Vary 

- Functions are the commands we are running --> things like `class()`, `rep()`
- The code typed into the `()` is called the *arguments*
- Their output varies based on the type of variable you put in the *arguments*

```{r}
dim(penguins) #rows, columns
length(penguins)
length(penguins$species)
```

## Lists

- While vectors are one row of data, we might want to have multiple rows or types
- With a vector, it is *key* to understand they have to be all the same type
- Lists are a grouping of variables that can be multiple types (between list items) and *can be different lengths*
- Often function output is saved as a list for this reason 
- They usually have names to help you print out just a small part of the list

```{r}
output <- lm(flipper_length_mm ~ bill_length_mm, data = penguins)
str(output)
output$coefficients
```

## Dimensional Data

- Matrices
  - Matrices are vectors with dimensions (like a 2X3)
  - All the data *must be the same type*
- Data Frames / Tibbles 
  - Like a matrix, but the columns can be different types of classes

## Matrix

- Let's talk about the `[ , ]` 
- `[row, column]` to *subset* or grab specific values

```{r}
myMatrix <- matrix(data = 1:10,
                   nrow = 5,
                   ncol = 2)
myMatrix
```

## Data Frames

- With data frames, we can use `[ , ]`
- However, they also have attributes that allow us to use the `$` (lists have this too!)

```{r}
penguins[1, 2:3]
penguins$sex[4:25] #why no comma?
```

## Dimensional Data

- What if you want to combine data? We've already talked about `c()`.
- `rbind()` allows you to put together rows
- `cbind()` allows you to put together columns 

```{r}
X <- 1:5
Y <- 6:10
# I can use either because they are the same size 
cbind(X,Y)
rbind(X,Y)
```

## Remind R Where Things Are

- Just because you know we have `penguins` open and there's a variable in in called `species` ... you cannot just use `species`

```{r}
ls()
ls(penguins)
```

## Converting Object Types

- You can use `as.` functions to convert between types
- Show as.<tab> to see what is available 
- Be careful though!

```{r}
newDF <- as.data.frame(cbind(X,Y))
str(newDF)
as.numeric(c("one", "two", "3"))
```

## Subsetting

- Subsetting is parceling out the rows/columns that you need given some criteria.
- We already talked about how to select one row/column with `[1,]` or `[,1]` and the `$` operator.
- What about cases you want to select based on scores, missing data, etc.?

## Subsetting Examples

- How does the logical operator work?
  - It analyzes each row/column for the appropriate logical question 
  - We are asking when bill length is greater than 54 
  - We only got back the rows that the length was greater than 54
  - Careful where you put it (before the `,`)

```{r}
penguins[1:2,] #just the first two rows 
penguins[penguins$bill_length_mm > 54 , ] #how does this work?
penguins$bill_length_mm > 54
```

## Subsetting Examples

```{r}
#you can create complex rules
penguins[penguins$bill_length_mm > 54 & penguins$bill_depth_mm > 17, ]
#you can do all BUT
penguins[ , -1]
#grab a few columns by name
vars <- c("bill_length_mm", "sex")
penguins[ , vars]
```

## Subsetting

- **Traditional subsetting** with `[row, column]` indexing
- **Modern alternatives** (tidyverse):
  - `filter()`: subset rows based on conditions
  - `select()`: choose specific columns
  - `slice()`: select rows by position
- `subset()` function: traditional alternative that handles NA automatically

```{r}
# Traditional approach
subset(penguins, bill_length_mm > 54)

# Modern tidyverse approach (if loaded)
# penguins %>% filter(bill_length_mm > 54)
```

## Missing Values

- Missing values are marked with `NA`
- `NaN` stands for not a number, which doesn't automatically convert to missing
- Most functions have an option for excluding the `NA` values *but* they can be slightly different 

```{r}
head(complete.cases(penguins)) #creates logical
head(na.omit(penguins)) #creates actual rows
head(is.na(penguins$body_mass_g)) #for individual vectors
```

## Working Directories

- Your computer has files and folders, and you have to tell *R* where to look
- The working directory is where you are currently telling it to look 

```{r}
getwd()
```

## Working Directory 

- You can set the working directory, but it's **not recommended** for reproducible code
- Hardcoded paths break when you move files or share code!

```{r eval = F}
# ❌ DON'T do this - hardcoded paths break portability:
# setwd("C:/Users/YourName/Documents/MyProject")

# ✅ DO use these modern approaches instead:
# 1. RStudio Projects (.Rproj files) - automatically sets working directory
# 2. R Markdown/Quarto - uses document location as working directory
# 3. here package - builds paths relative to project root
# library(here)
# data <- read.csv(here("data", "myfile.csv"))
```
 
## Working Directory

- Working directories enable automation and reproducibility
- **Best practices for modern R development**:
  - Use **RStudio Projects** (.Rproj) for organization
  - Use **R Markdown** or **Quarto** for literate programming
  - Use the **here package** for reliable relative paths
  - Never use `setwd()` in scripts you share
- R Markdown automatically uses the file's location as working directory
- Projects make collaboration and version control easier 

## Importing Files

- There are many ways to import files:
  - **Base R**: `read.csv()`, `read.table()`, `readLines()`
  - **readr (tidyverse)**: `read_csv()` - faster and more consistent
  - **rio package**: `import()` - works with many formats automatically
  - **data.table**: `fread()` - very fast for large files
  - **readxl**: For Excel files
- **Best practice**: Use relative paths with RStudio Projects or R Markdown

```{r}
library(rio)
# Using relative path - works from R Markdown's location
myDF <- import("data/example_introR.csv")
head(myDF)
```

## Packages

- You can install extra functions by installing **packages** (also called *libraries*)
- Download from CRAN using `install.packages()`
- Install from GitHub using `remotes::install_github()` or `devtools::install_github()`
- **Modern package management**: Use `renv` for reproducible environments

```{r eval = F}
install.packages("tidyverse")  # Suite of modern R packages
install.packages("car")         # Companion to Applied Regression
```

## Packages 

- View installed packages in the Packages pane
- After major R updates, you'll need to reinstall packages
- Load packages each session with `library()` or `require()`
- **Best practice**: Load all packages at the top of your script
- **Tidyverse**: Modern collection of packages for data science
  - Includes: ggplot2, dplyr, tidyr, readr, purrr, tibble, stringr, forcats

```{r eval = F}
library(tidyverse)  # Loads multiple packages at once
library(car)
```

## Functions

- Functions are pre-written code to help you run analyses
- Get help with function, learn what the arguments should be:
  - Let's flip back to RStudio to see what this did

```{r eval = F}
?lm
help(lm)
```

## Functions

```{r}
args(lm)
example(lm)
```

## Define Your Own Function

- Name the function before `<-`
- Define the arguments inside `()`
- Define what the function does inside `{}`

```{r}
pizza <- function(x){ x^2 }
pizza(3)
```

## Example Functions

```{r}
table(penguins$species)
summary(penguins$bill_length_mm)
```

## Examples Functions with Missing Data

```{r}
mean(penguins$bill_length_mm) #returns NA
mean(penguins$bill_length_mm, na.rm = TRUE)

cor(penguins[ , c("bill_length_mm", "bill_depth_mm", "flipper_length_mm")])
cor(penguins[ , c("bill_length_mm", "bill_depth_mm", "flipper_length_mm")],
    use = "pairwise.complete.obs")
```

## Other Descriptive Functions

- `cov()`
- `var()`
- `sd()`
- `scale()`

## Wrapping Up

- In this introduction, you've learned:
  - Basic R programming concepts and terminology
  - R/Posit IDE navigation and workflow
  - Data structures and types
  - Data import and manipulation
  - Working with functions and packages
  - Modern best practices for reproducible research
- **Next steps**: 
  - Practice regularly with real datasets
  - Explore the tidyverse for modern data analysis
  - Learn ggplot2 for visualization
  - Use RStudio Projects and version control (Git)
  - Join the R community on Posit Community and Stack Overflow 


